{"ts":1378257138212,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"/**\n * boxlayout.js v1.0.0\n * http://www.codrops.com\n *\n * Licensed under the MIT license.\n * http://www.opensource.org/licenses/mit-license.php\n * \n * Copyright 2013, Codrops\n * http://www.codrops.com\n */\nvar Boxlayout = (function() {\n\n\tvar $el = $( '#bl-main' ),\n\t\t$sections = $el.children( 'section' ),\n\t\t// works section\n\t\t$sectionWork = $( '#bl-work-section' ),\n\t\t// work items\n\t\t$workItems = $( '#bl-work-items > li' ),\n\t\t// work panels\n\t\t$workPanelsContainer = $( '#bl-panel-work-items' ),\n\t\t$workPanels = $workPanelsContainer.children( 'div' ),\n\t\ttotalWorkPanels = $workPanels.length,\n\t\t// navigating the work panels\n\t\t$nextWorkItem = $workPanelsContainer.find( 'nav > span.bl-next-work' ),\n\t\t// if currently navigating the work items\n\t\tisAnimating = false,\n\t\t// close work panel trigger\n\t\t$closeWorkItem = $workPanelsContainer.find( 'nav > span.bl-icon-close' ),\n\t\ttransEndEventNames = {\n\t\t\t'WebkitTransition' : 'webkitTransitionEnd',\n\t\t\t'MozTransition' : 'transitionend',\n\t\t\t'OTransition' : 'oTransitionEnd',\n\t\t\t'msTransition' : 'MSTransitionEnd',\n\t\t\t'transition' : 'transitionend'\n\t\t},\n\t\t// transition end event name\n\t\ttransEndEventName = transEndEventNames[ Modernizr.prefixed( 'transition' ) ],\n\t\t// support css transitions\n\t\tsupportTransitions = Modernizr.csstransitions;\n\n\tfunction init() {\n\t\tinitEvents();\n\t}\n\n\tfunction initEvents() {\n\t\t\n\t\t$sections.each( function() {\n\t\t\t\n\t\t\tvar $section = $( this );\n\n\t\t\t// expand the clicked section and scale down the others\n\t\t\t$section.on( 'click', function() {\n\n\t\t\t\tif( !$section.data( 'open' ) ) {\n\t\t\t\t\t$section.data( 'open', true ).addClass( 'bl-expand bl-expand-top' );\n\t\t\t\t\t$el.addClass( 'bl-expand-item' );\t\n\t\t\t\t}\n\n\t\t\t} ).find( 'span.bl-icon-close' ).on( 'click', function() {\n\t\t\t\t\n\t\t\t\t// close the expanded section and scale up the others\n\t\t\t\t$section.data( 'open', false ).removeClass( 'bl-expand' ).on( transEndEventName, function( event ) {\n\t\t\t\t\tif( !$( event.target ).is( 'section' ) ) return false;\n\t\t\t\t\t$( this ).off( transEndEventName ).removeClass( 'bl-expand-top' );\n\t\t\t\t} );\n\n\t\t\t\tif( !supportTransitions ) {\n\t\t\t\t\t$section.removeClass( 'bl-expand-top' );\n\t\t\t\t}\n\n\t\t\t\t$el.removeClass( 'bl-expand-item' );\n\t\t\t\t\n\t\t\t\treturn false;\n\n\t\t\t} );\n\n\t\t} );\n\n\t\t// clicking on a work item: the current section scales down and the respective work panel slides up\n\t\t$workItems.on( 'click', function( event ) {\n\n\t\t\t// scale down main section\n\t\t\t$sectionWork.addClass( 'bl-scale-down' );\n\n\t\t\t// show panel for this work item\n\t\t\t$workPanelsContainer.addClass( 'bl-panel-items-show' );\n\n\t\t\tvar $panel = $workPanelsContainer.find(\"[data-panel='\" + $( this ).data( 'panel' ) + \"']\");\n\t\t\tcurrentWorkPanel = $panel.index();\n\t\t\t$panel.addClass( 'bl-show-work' );\n\n\t\t\treturn false;\n\n\t\t} );\n\n\t\t// navigating the work items: current work panel scales down and the next work panel slides up\n\t\t$nextWorkItem.on( 'click', function( event ) {\n\t\t\t\n\t\t\tif( isAnimating ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tisAnimating = true;\n\n\t\t\tvar $currentPanel = $workPanels.eq( currentWorkPanel );\n\t\t\tcurrentWorkPanel = currentWorkPanel < totalWorkPanels - 1 ? currentWorkPanel + 1 : 0;\n\t\t\tvar $nextPanel = $workPanels.eq( currentWorkPanel );\n\n\t\t\t$currentPanel.removeClass( 'bl-show-work' ).addClass( 'bl-hide-current-work' ).on( transEndEventName, function( event ) {\n\t\t\t\tif( !$( event.target ).is( 'div' ) ) return false;\n\t\t\t\t$( this ).off( transEndEventName ).removeClass( 'bl-hide-current-work' );\n\t\t\t\tisAnimating = false;\n\t\t\t} );\n\n\t\t\tif( !supportTransitions ) {\n\t\t\t\t$currentPanel.removeClass( 'bl-hide-current-work' );\n\t\t\t\tisAnimating = false;\n\t\t\t}\n\t\t\t\n\t\t\t$nextPanel.addClass( 'bl-show-work' );\n\n\t\t\treturn false;\n\n\t\t} );\n\n\t\t// clicking the work panels close button: the current work panel slides down and the section scales up again\n\t\t$closeWorkItem.on( 'click', function( event ) {\n\n\t\t\t// scale up main section\n\t\t\t$sectionWork.removeClass( 'bl-scale-down' );\n\t\t\t$workPanelsContainer.removeClass( 'bl-panel-items-show' );\n\t\t\t$workPanels.eq( currentWorkPanel ).removeClass( 'bl-show-work' );\n\t\t\t\n\t\t\treturn false;\n\n\t\t} );\n\n\t}\n\n\treturn { init : init };\n\n})();"]],"start1":0,"start2":0,"length1":0,"length2":4075}]],"length":4075}
